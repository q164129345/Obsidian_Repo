# 导言
---
实用的串口接收程序都会使用中断方式，不会使用轮询方式。最主要的原因当波特率较高时，轮询极其容易错失数据，而中断方式能确保及时获取数据。另外，轮询方式需要不断查询USART_SR的RXNE位（接收数据寄存器非空），即使没有数据到达。这会导致CPU资源浪费，尤其在低速通讯或数据不频繁到达时。中断方式只有在数据到达时（RXNE = 1），才需要CPU介入处理，其他时间CPU可以专注处理其他任务，显著提高系统效率。

接收中断也有区分：
1. 接收缓冲区非空中断
2. IDLE接收空闲中断
# 一、CubeMX
---
![[Pasted image 20250303191644.png | 1100]]
如上所示，开启USART1全局中断。
![[Pasted image 20250303191746.png | 1100]]
确认是LL库代码后，生成代码。

## 1.1、usart.c
![[Pasted image 20250303191937.png | 800]]
## 1.2、stm32f1xx_it.c
![[Pasted image 20250303192110.png | 800]]
如上所示，多了全局中断函数`USART1_IRQHandler()`。
![[Pasted image 20250303193749.png | 1000]]
这个函数命名在启动文件的中断向量表里。

# 二、代码
---
## 2.2、main.c




