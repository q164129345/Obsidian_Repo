# 导言
---
《[[STM32F103_LL库+寄存器学习笔记16 - 监控CAN发送失败（轮询方式）]]》完成用轮询的方式去监控CAN的错误状态。

在CAN通信中，轮询和中断方式检测错误状态各有其适用场景和优缺点：
1. **轮询方式（Polling）的优点：**
- 实现简单，无需配置中断向量，直接在主循环中定期检查错误寄存器即可。
```c
while (1) {
    /* 监控CAN错误 */
    if (CAN_Check_Error() == 0x03) { // 因为错误太严重，进入离线状态
        g_BusOffCount++;      // 每发生一次busoff严重错误，记录一次
        CAN_BusOff_Recover(); // 离线状态恢复
    } else {
        // 其他错误与没有错误
    }
    HAL_Delay(10); // 10ms轮询间隔
}
```
- 确定性高，错误检测的时机由主循环控制，适合对实时性要求不严格的场景。
- 无中断开销，节省中断上下文切换的时间（约20-50个CPU周期）。
**缺点**
- 实时性差，错误从发生到被检测的延迟取决于轮询间隔（如10ms轮询时，最大延迟10ms）。
- CPU资源浪费，高频轮询（如1ms）会占用大量CPU时间，低频率则可能错过瞬时错误。
