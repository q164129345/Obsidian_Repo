# 导言
---
在 ROS2 中，`source install/setup.zsh`（或者 `.bash`）是为了将编译后的工作空间中的包和节点加入当前的环境变量，使得你可以使用 ROS2 工具（例如 `ros2 run` 或 `ros2 launch`）来找到和运行你编写的节点。这里是具体的原因：

**更新环境变量**
`source install/setup.zsh` 会将 ROS2 工作空间中的安装目录 (`install`) 的路径添加到你的环境变量中，特别是将节点所在的路径加入到 `PATH` 和 `AMENT_PREFIX_PATH` 中。这使得 ROS2 能够找到你编译好的可执行文件和其他资源。

**可见性**
编译后，生成的二进制文件和库会放置在工作空间的 `install` 目录下。通过 `source install/setup.zsh`，你让系统知道这些文件所在的位置，从而可以正常运行、调试这些节点。如果不执行 `source`，终端环境无法知道这些可执行文件的位置，因此 `ros2 run` 等命令无法找到对应的节点。

**多工作空间的管理**
在 ROS2 中，你可能会使用多个工作空间进行开发。例如，一个工作空间用于核心功能，另一个工作空间用于测试或实验。通过 `source` 操作，你可以动态地切换不同工作空间的上下文，并组合多个工作空间的功能。
- 当你 `source` 一个新的 `setup.zsh` 时，当前的环境会更新到新的工作空间。
- 通过 `source` 来管理多个工作空间，通常称为“工作空间叠加（overlay workspace）”，这可以让开发人员利用上游的功能，同时进行新的开发。

**shell 继承**
当你打开一个新的终端时，它不会自动加载你之前编译的包。因此，每次打开一个新终端后，都需要重新执行 `source install/setup.zsh` 以加载当前环境。如果你使用的是 `.bashrc` 或 `.zshrc`，可以将 `source` 命令添加到这些文件中，从而每次打开新终端时自动加载。

**总结**
`source install/setup.zsh` 是 ROS2 中一个必要的步骤，用来告诉你的终端环境新编译的节点和库的位置，从而使得这些节点可以被找到和运行。如果不执行这个步骤，编译后的代码将不会被 ROS2 工具识别，你将无法使用诸如 `ros2 run` 之类的命令来运行你的节点。

因此，`source` 是让新编译的包和节点“生效”的关键一步。