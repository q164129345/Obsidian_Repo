## 导言
---

| [正面]![[Pasted image 20240823145847.png\|700]] | [反面]![[Pasted image 20240823150044.png]] |
| :-------------------------------------------: | :--------------------------------------: |
原理图如下：
file:///home/wallace/Documents/baidu_pan/%E4%B8%AD%E5%89%B2%E8%8D%89/%E5%8E%9F%E7%90%86%E5%9B%BE/VCU-R1911.pdf

## 一、数字量开关输入
---
#光耦隔离电路 在电源、工业控制、机器人上使用非常广泛，属于基本功之一。
![[Pasted image 20240823151221.png]] 
![[Pasted image 20240823151401.png]]
1. DI_5_CH0 ~ DI_5_CH7是外部接口。
	1. 当悬空时，DI_5_IN0 ~ DI_5_IN7被拉低，MCU读取到低电平。
	2. 当被拉低时，DI_5_IN0 ~ DI_5_IN7被拉高，MCU读取到高电平。

![[Pasted image 20240823151921.png]]
令我觉得很意外的是，居然还有一个自测电路。我觉得这个电路不是特别重要，毕竟我们可以拿一根线，将DI_5_CH0 ~ DI_5_CH7单独连接到GND口进行自测。

#74HCT4051D 芯片的作用是：
1. **多路复用（Mux）：** 该芯片可以将8个模拟信号（Y0-Y7）中的一个通过选择端口（S1, S2, S3）选择并输出到公共端口（Z）。这类似于一个电子开关，可以选择连接哪个输入信号。
2. **解复用（Demux）：** 在解复用模式下，它可以将一个输入信号（Z）分配到8个输出信号（Y0-Y7）中的一个，选择的输出由选择端口（S1, S2, S3）决定。
3. **逻辑电平转换：** 74HCT4051D可以处理TTL电平信号，这意味着它能够与其他TTL兼容的电路轻松接口。这使得它适用于与微控制器或其他逻辑电路的集成。
4. **使能控制：** 该芯片还具有一个使能输入（E），当该引脚被置为高电平时，芯片将不工作（即所有通道都断开）。当使能引脚为低电平时，芯片可以正常工作。
5.  **低功耗、高速度：** 74HCT4051D芯片的设计适用于高速操作，同时保持较低的功耗，这对于许多嵌入式应用是一个显著优势。

使用这个芯片，可以将3个输出PIN口，变成8个输出PIN口。同时Z口可以接高电平，也可以接低电平。这个VCU板子上的作用是自测，有一点浪费啊。而且，==当不使用这块电路时，需要将DI_Selftest_EN口拉高，避免影响到DI_5_CH0~DI_5_CH7的使用。==


## 二、数字量开关输出
---
![[Pasted image 20240823154423.png]]
MOS输出电路，为什么不加光耦隔离？

![[Pasted image 20240823155459.png]]
看不懂，为什么输出也要用 #74HCT4051D 设计一个Selftest电路？
MOS电路：
1. **当 OD_CH5 输出低电平（0V）时**：
    - Q26（三极管）不会导通，因为基极和发射极之间的电压不足以使其开启。
    - 这意味着 Q23（P沟道MOSFET）也会保持关闭状态，因为没有电流通过 R184 进入其栅极。
    - 因此，继电器不会被激活，**RelayG2_5** 的输出将为 **0V**（或继电器未通电）。
2. **当 OD_CH5 输出高电平（3.3V）时**：
    - Q26 会导通，因为基极和发射极之间的电压足以使其开启，从而允许电流通过 R191。
    - 这会通过 R184 将 Q23 的栅极拉低，使 MOSFET（Q23）导通。
    - 一旦 Q23 导通，继电器线圈将通过 D58 和 D57 通电，从而闭合继电器的触点。
    - 因此，**RelayG2_5** 的输出将为 **12V**（或继电器已通电）。

总结：
- **OD_CH5 低电平（0V）：RelayG2_5 = 0V**
- **OD_CH5 高电平（3.3V）：RelayG2_5 = 12V**















