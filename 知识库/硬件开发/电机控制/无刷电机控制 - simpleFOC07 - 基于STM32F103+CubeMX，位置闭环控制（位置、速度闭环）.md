# 导言
---
![[Pasted image 20250114112908.png | 1100]]
**FOC的精髓是电流环，但并不是没有电流环就没办法用FOC。** 如上所示，simpleFOC在没有电流环前提下的位置闭环控制框架。此时，闭环的关键是电机的编码器。效果如下所示，电机总是能回到设置的目标位置。

![[20250114-114914.mp4]]

## RTT_Viewer
![[ctrl1.gif]]
如上图所示，程序初始化时先校准传感器，获取编码器的方向与0电角度（找到电角度与转子角度之间的固定关系）。程序设定了目标角度是1.0f。在上面视频里，我用手摆动电机的转子，让它离开1.0f的位置。当我的手松开后，位置闭环会让转子重新回到1.0f的位置。这就是位置闭环。

# 一、代码
---




