# 3.1、序
---
在上一章，我们已经明确了电机控制的硬件过程，就是交替的开关这些各个相的MOS管，这样就可以实现电机的转动。
那么可以根据我们期望的电机运行情况，通过一个电机运行模型，实现交替开关各个MOS管的算法，这就是**FOC算法**，它的另一个名称就是**磁场定向控制算法**，而**克拉克变换**和**帕克变换**，就是磁场定向控制算法的**两个核心**。
深入浅出，我们并不需要一开始就讲这两个变换是什么东西，我们在电机模型建立的过程中自然而然就可以对它进行了解。接下来我们开始**建立无刷电机的数学模型**。
# 3.2、克拉克变换
---
我们知道，交替开关的MOS管可以实现电机的转动，而这些交替开关的MOS管是以极其快的速度在周期性进行的，把这些周期性的开启和关断过程联系起来，并且对其各个相进行单独观察，就可以得到三个相A、B、C的电流随时间变换的曲线，如下图所示，他们之间存在120°的相位差。
![[Pasted image 20241012164224.png]]
换一个角度来思考此问题，实际上，我们只要能够**控制这个相位差为120°的sin状波形，就能够实现针对电机的控制**。

而**克拉克变换**就是实现这个波形控制的第一步。

克拉克变换里的克拉克是一个真实存在的人 ，她的全名叫：**伊迪丝·克拉克（Edith Clarke，1883 年 2 月 10 日 - 1959 年 10 月 29 日）**。她是美国第一位专业从事电气工程师工作的女性， 也是美国第一位电气工程女教授。 她是第一位在美国电气工程师学会发表论文的女性，第一位专业地位得到 Tau Beta Pi 认可的女性工程师，也是第一位被任命为美国电气工程师学会院士的女性。 她专门从事电力系统分析，并撰写了交流电力系统的电路分析。
![[Pasted image 20241012164252.png]]
接下来我们来看一看这位传奇女性所提出来的克拉克变换。
我们知道，虽然说是要控制120度的sin状型波形来实现电机控制，但是只要仔细想一想，就会知道这个波形其实是极难控制和改变参数的。首先相与相之间是相互耦合的，MOS管一打开就会至少同时打开两个相，所以只想改变一相来实现电机控制是肯定不行的，必须得三相捷联起来一起改变，才能够实现电机的控制。所以，实现电机控制的问题就会变成很复杂。
显然，人的本性不容许我们把问题进一步复杂化，因此，我们需要对这个问题进行降维，尽量把这个多变量耦合的问题降解为最好是单一变量的控制问题，克拉克变换就是想做这件事。
所谓**克拉克变换，实际上就是降维解耦的过程，把难以辨明和控制的三相相位差120°电机波形降维为两维矢量**。
它的思路其实特别的简单，**第一就是把三相随时间变换的，相位差为120°的电流波形抽象化为三个间隔120°的矢量**。
**第二就是利用三角函数对矢量进行降维，降维到两个坐标轴**，从此复杂的三相变化问题就降解为了α-β坐标轴的坐标上的数值变化问题。
![[Pasted image 20241012164327.png]]
上图中，左边是我们把三相120度相位差的sin状波形抽象化为矢量之后的样子，而右边就是我们需要**把这三个矢量进行投影的坐标轴。只要我们把三个矢量都投影到坐标轴上，那么，一个三矢量问题就变成一个二维坐标平面问题**。
下面我们来进行一次投影过程的详细推导。
万恶之源的开始，就是三角函数：
![[Pasted image 20241012164625.png]]

显然，针对α-β坐标系中α轴，有：
![[Pasted image 20241012164704.png]]
针对α-β坐标系中β轴，有
![[Pasted image 20241012164716.png]]
把上面的投影结果列成矩阵形式，有：
![[Pasted image 20241012164730.png]]
这就是**克拉克变换的第一步，作投影**。
![[Pasted image 20241012164748.png]]

这就是**克拉克变换的等辐值形式**。
何为等幅值变换？用α相电流输入1A电流的特例来举例，当电流输入时候，根据基尔霍夫电流定律（电路中任一个节点上，在任意时刻，流入节点的电流之和等于流出节点的电流之和，如下图），有：
![[Pasted image 20241012164837.png]]
![[Pasted image 20241012164936.png]]
![[Pasted image 20241012165005.png]]
![[Pasted image 20241012165027.png]]
![[Pasted image 20241012165046.png]]
可以看出，在式子中，我们消去了变量ic，这是因为由于基尔霍夫电流定律的存在，我们并不需要知道所有三相电流，我们只需要知道两相电流就能够求解得到另外一相的电流，反映在硬件上，
**我们就可以省去一路的电流传感器！节省了成本！**