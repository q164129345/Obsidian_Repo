---
annotation-target: "[[STM32F1中文参考手册V10.pdf]]"
---


>%%
>```annotation-json
>{"created":"2025-02-19T03:05:31.599Z","text":"只要用到GPIO复用功能，APB2寄存器的bit0位AFIOEN寄存器就要置1","updated":"2025-02-19T03:05:31.599Z","document":{"title":"STM32 Technical Reference Manual (Chinese)","link":[{"href":"urn:x-pdf:2d2857a4e0d890cb03f583961d008f28"},{"href":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf"}],"documentFingerprint":"2d2857a4e0d890cb03f583961d008f28"},"uri":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","target":[{"source":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","selector":[{"type":"TextPositionSelector","start":78607,"end":78613},{"type":"TextQuoteSelector","exact":"AFIOEN","prefix":"PEENIOPDENIOPCENIOPBENIOPAEN 保留 ","suffix":"rw rw rw rw rw rw rw rw rw rw rw"}]}]}
>```
>%%
>*%%PREFIX%%PEENIOPDENIOPCENIOPBENIOPAEN 保留%%HIGHLIGHT%% ==AFIOEN== %%POSTFIX%%rw rw rw rw rw rw rw rw rw rw rw*
>%%LINK%%[[#^vnc5a1j6yx9|show annotation]]
>%%COMMENT%%
>只要用到GPIO复用功能，APB2寄存器的bit0位AFIOEN寄存器就要置1
>%%TAGS%%
>
^vnc5a1j6yx9


>%%
>```annotation-json
>{"created":"2025-02-27T08:44:48.186Z","text":"比如使用PB4的上升沿中断，需要配置与使能EXTI4中断线","updated":"2025-02-27T08:44:48.186Z","document":{"title":"STM32 Technical Reference Manual (Chinese)","link":[{"href":"urn:x-pdf:2d2857a4e0d890cb03f583961d008f28"},{"href":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf"}],"documentFingerprint":"2d2857a4e0d890cb03f583961d008f28"},"uri":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","target":[{"source":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","selector":[{"type":"TextPositionSelector","start":160139,"end":160158},{"type":"TextQuoteSelector","exact":"要产生中断，必须先配置好并使能中断线。","prefix":"为唤醒事件，请参见9.2.4节的功能说明 9.2.4 功能说明 ","suffix":"根据需要的边沿检测设置2个触发寄存器，同时在中断屏蔽寄存器的相应"}]}]}
>```
>%%
>*%%PREFIX%%为唤醒事件，请参见9.2.4节的功能说明 9.2.4 功能说明%%HIGHLIGHT%% ==要产生中断，必须先配置好并使能中断线。== %%POSTFIX%%根据需要的边沿检测设置2个触发寄存器，同时在中断屏蔽寄存器的相应*
>%%LINK%%[[#^w7ourylowlj|show annotation]]
>%%COMMENT%%
>比如使用PB4的上升沿中断，需要配置与使能EXTI4中断线
>%%TAGS%%
>
^w7ourylowlj


>%%
>```annotation-json
>{"created":"2025-02-28T08:02:56.445Z","updated":"2025-02-28T08:02:56.445Z","document":{"title":"STM32 Technical Reference Manual (Chinese)","link":[{"href":"urn:x-pdf:2d2857a4e0d890cb03f583961d008f28"},{"href":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf"}],"documentFingerprint":"2d2857a4e0d890cb03f583961d008f28"},"uri":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","target":[{"source":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","selector":[{"type":"TextPositionSelector","start":584222,"end":584304},{"type":"TextQuoteSelector","exact":"注： 1 ．在数据传输期间不能复位TE位，否则将破坏TX脚上的数据，因为波特率计数器停止计数。正在传输的当前数据将丢失。  2 ． TE位被激活后将发送一个空闲帧。","prefix":"SART支持多种停止位的配置：0.5、1、1.5和2个停止位。 ","suffix":" 可配置的停止位 随每个字符发送的停止位的位数可以通过控制寄存器"}]}]}
>```
>%%
>*%%PREFIX%%SART支持多种停止位的配置：0.5、1、1.5和2个停止位。%%HIGHLIGHT%% ==注： 1 ．在数据传输期间不能复位TE位，否则将破坏TX脚上的数据，因为波特率计数器停止计数。正在传输的当前数据将丢失。  2 ． TE位被激活后将发送一个空闲帧。== %%POSTFIX%%可配置的停止位 随每个字符发送的停止位的位数可以通过控制寄存器*
>%%LINK%%[[#^9y1l4wp2oar|show annotation]]
>%%COMMENT%%
>
>%%TAGS%%
>
^9y1l4wp2oar



>%%
>```annotation-json
>{"created":"2025-02-28T08:20:06.468Z","text":"USART发送的关键知识：\n1. 将要发送的字节放入USART_DR时，需要先判断USART_SR的位TXE是否=1，等于1才能将发送的字节放入USART_DR。\n\n代码：\nvoid USART1_SendChar_Reg(uint8_t c) {\n    // 等待TXE置位（发送缓冲区空）\n    while (!(USART1->SR & (1 << 7)));\n    // 写入数据到DR\n    USART1->DR = c;\n}","updated":"2025-02-28T08:20:06.468Z","document":{"title":"STM32 Technical Reference Manual (Chinese)","link":[{"href":"urn:x-pdf:2d2857a4e0d890cb03f583961d008f28"},{"href":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf"}],"documentFingerprint":"2d2857a4e0d890cb03f583961d008f28"},"uri":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","target":[{"source":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","selector":[{"type":"TextPositionSelector","start":585069,"end":585187},{"type":"TextQuoteSelector","exact":"清零TXE位总是通过对数据寄存器的写操作来完成的。TXE位由硬件来设置，它表明： ●  数据已经从TDR移送到移位寄存器，数据发送已经开始 ●  TDR寄存器被清空 ●  下一个数据可以被写进USART_DR寄存器而不会覆盖先前的数据 ","prefix":"模式之前，需要确认传输结束，避免破坏最后一次传输。 单字节通信 ","suffix":"如果TXEIE位被设置，此标志将产生一个中断。 如果此时USAR"}]}]}
>```
>%%
>*%%PREFIX%%模式之前，需要确认传输结束，避免破坏最后一次传输。 单字节通信%%HIGHLIGHT%% ==清零TXE位总是通过对数据寄存器的写操作来完成的。TXE位由硬件来设置，它表明： ●  数据已经从TDR移送到移位寄存器，数据发送已经开始 ●  TDR寄存器被清空 ●  下一个数据可以被写进USART_DR寄存器而不会覆盖先前的数据== %%POSTFIX%%如果TXEIE位被设置，此标志将产生一个中断。 如果此时USAR*
>%%LINK%%[[#^ewsl3pvzurr|show annotation]]
>%%COMMENT%%
>USART发送的关键知识：
>1. 将要发送的字节放入USART_DR时，需要先判断USART_SR的位TXE是否=1，等于1才能将发送的字节放入USART_DR。
>
>代码：
>void USART1_SendChar_Reg(uint8_t c) {
>    // 等待TXE置位（发送缓冲区空）
>    while (!(USART1->SR & (1 << 7)));
>    // 写入数据到DR
>    USART1->DR = c;
>}
>%%TAGS%%
>
^ewsl3pvzurr


>%%
>```annotation-json
>{"created":"2025-02-28T08:53:55.696Z","text":"低功耗需要注意的地方。","updated":"2025-02-28T08:53:55.696Z","document":{"title":"STM32 Technical Reference Manual (Chinese)","link":[{"href":"urn:x-pdf:2d2857a4e0d890cb03f583961d008f28"},{"href":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf"}],"documentFingerprint":"2d2857a4e0d890cb03f583961d008f28"},"uri":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","target":[{"source":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","selector":[{"type":"TextPositionSelector","start":585546,"end":585616},{"type":"TextQuoteSelector","exact":"在USART_DR寄存器中写入了最后一个数据字后，在关闭USART模块之前或设置微控制器进入低功耗模式(详见下图)之前，必须先等待TC=1。","prefix":"异步收发器(USART)    STM32F10xxx参考手册 ","suffix":" 使用下列软件过程清除TC位： 1．读一次USART_SR寄存器"}]}]}
>```
>%%
>*%%PREFIX%%异步收发器(USART)    STM32F10xxx参考手册%%HIGHLIGHT%% ==在USART_DR寄存器中写入了最后一个数据字后，在关闭USART模块之前或设置微控制器进入低功耗模式(详见下图)之前，必须先等待TC=1。== %%POSTFIX%%使用下列软件过程清除TC位： 1．读一次USART_SR寄存器*
>%%LINK%%[[#^b6gzl1izcew|show annotation]]
>%%COMMENT%%
>低功耗需要注意的地方。
>%%TAGS%%
>
^b6gzl1izcew


>%%
>```annotation-json
>{"created":"2025-02-28T09:41:56.975Z","updated":"2025-02-28T09:41:56.975Z","document":{"title":"STM32 Technical Reference Manual (Chinese)","link":[{"href":"urn:x-pdf:2d2857a4e0d890cb03f583961d008f28"},{"href":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf"}],"documentFingerprint":"2d2857a4e0d890cb03f583961d008f28"},"uri":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","target":[{"source":"vault:/%E7%94%B5%E5%AD%90%E4%B9%A6/STM32F1%E4%B8%AD%E6%96%87%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8CV10.pdf","selector":[{"type":"TextPositionSelector","start":586871,"end":587138},{"type":"TextQuoteSelector","exact":"当一字符被接收到时， ●  RXNE位被置位。它表明移位寄存器的内容被转移到RDR。换句话说，数据已经被接收并且可以被读出(包括与之有关的错误标志)。 ●  如果RXNEIE位被设置，产生中断。 ●  在接收期间如果检测到帧错误，噪音或溢出错误，错误标志将被置起，  ●  在多缓冲器通信时，RXNE在每个字节接收后被置起，并由DMA对数据寄存器的读操作而清零。 ●  在单缓冲器模式里，由软件读USART_DR寄存器完成对RXNE位清除。RXNE标志也可以通过对它写0来清除。RXNE位必须在下一字符接收结束前被清零，以避免溢出错误","prefix":"置USART_CR1的RE位。激活接收器，使它开始寻找起始位。 ","suffix":"。 注意： 在接收数据时，RE位不应该被复位。如果RE位在接收时"}]}]}
>```
>%%
>*%%PREFIX%%置USART_CR1的RE位。激活接收器，使它开始寻找起始位。%%HIGHLIGHT%% ==当一字符被接收到时， ●  RXNE位被置位。它表明移位寄存器的内容被转移到RDR。换句话说，数据已经被接收并且可以被读出(包括与之有关的错误标志)。 ●  如果RXNEIE位被设置，产生中断。 ●  在接收期间如果检测到帧错误，噪音或溢出错误，错误标志将被置起，  ●  在多缓冲器通信时，RXNE在每个字节接收后被置起，并由DMA对数据寄存器的读操作而清零。 ●  在单缓冲器模式里，由软件读USART_DR寄存器完成对RXNE位清除。RXNE标志也可以通过对它写0来清除。RXNE位必须在下一字符接收结束前被清零，以避免溢出错误== %%POSTFIX%%。 注意： 在接收数据时，RE位不应该被复位。如果RE位在接收时*
>%%LINK%%[[#^ftxqhyei9qh|show annotation]]
>%%COMMENT%%
>
>%%TAGS%%
>
^ftxqhyei9qh
